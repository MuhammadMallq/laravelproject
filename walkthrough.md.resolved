# üìä Analisis Kode Program Ice Tea Shop

## Ringkasan Aplikasi
Aplikasi web **Ice Tea Shop** berbasis Laravel untuk manajemen penjualan minuman dengan fitur pemesanan online dan dashboard admin.

---

## üóÑÔ∏è Database Schema

```mermaid
erDiagram
    ADMIN {
        bigint id PK
        string username
        string password
    }
    
    MENU {
        bigint id PK
        string nama_menu
        decimal harga
        text deskripsi
        string gambar
        int stok
        int terjual
    }
    
    PESANAN {
        bigint id PK
        text detail_pesanan
        decimal total_harga
        string metode_pembayaran
        string status_pesanan
        timestamp waktu_pesan
    }
```

---

## üë• Sesi & Akses Pengguna

### üîì Public (Tanpa Login)

| Route | Controller | Fungsi | CRUD |
|-------|------------|--------|------|
| `/` | `HomeController@index` | Halaman utama | - |
| `/menu` | `MenuController@index` | Lihat daftar menu | **READ** |
| `/contact` | `HomeController@contact` | Halaman kontak | - |
| `/simpan-pesanan` | `OrderController@store` | Buat pesanan baru | **CREATE** |

**Flow User Public:**
```mermaid
flowchart LR
    A[Buka Website] --> B[Lihat Menu]
    B --> C[Pilih Menu]
    C --> D[Checkout]
    D --> E[Pilih Metode Bayar]
    E --> F[Simpan Pesanan]
```

---

### üîê Admin (Perlu Login)

**Middleware:** [AdminMiddleware](file:///C:/Users/USER/Documents/laravelproject/app/Http/Middleware/AdminMiddleware.php#9-20) - Cek `session('admin')` untuk akses

| Route | Controller | Fungsi | CRUD |
|-------|------------|--------|------|
| `/login` | `AuthController@showLogin` | Form login | - |
| `POST /login` | `AuthController@login` | Proses login | - |
| `/logout` | `AuthController@logout` | Logout admin | - |

---

## üìÅ Detail Modul per Fungsi

### 1Ô∏è‚É£ Modul Autentikasi ([AuthController](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/AuthController.php#8-47))

| Method | Fungsi | Detail |
|--------|--------|--------|
| [showLogin()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/AuthController.php#10-17) | Tampilkan form login | Redirect ke dashboard jika sudah login |
| [login()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/AuthController.php#18-40) | Proses login | Validasi username & password (plain text) |
| [logout()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/AuthController.php#41-46) | Logout | Hapus session `admin` |

**File Terkait:**
- Controller: [AuthController.php](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/AuthController.php)
- View: [login.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/admin/login.blade.php)
- Model: [Admin.php](file:///C:/Users/USER/Documents/laravelproject/app/Models/Admin.php)

---

### 2Ô∏è‚É£ Dashboard Admin ([DashboardController](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/DashboardController.php#10-71))

| Method | Fungsi | Detail |
|--------|--------|--------|
| [index()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/DashboardController.php#12-70) | Tampilkan dashboard | Statistik, chart, & data tabel |

**Statistik yang ditampilkan:**
- Total menu
- Total pesanan
- Stok menipis (< 10)
- Omset (pesanan Selesai)
- Chart metode pembayaran
- Chart pendapatan bulanan
- Top 5 menu terlaris
- 5 pesanan terakhir

**File Terkait:**
- Controller: [DashboardController.php](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/DashboardController.php)
- View: [dashboard.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/admin/dashboard.blade.php)

---

### 3Ô∏è‚É£ Manajemen Menu ([MenuController](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php#9-100))

| Method | Route | Fungsi | CRUD |
|--------|-------|--------|------|
| [index()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/DashboardController.php#12-70) | `/menu` | Daftar menu (public) | **READ** |
| [create()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php#18-22) | `/admin/menu/create` | Form tambah menu | - |
| [store()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/OrderController.php#71-111) | `POST /admin/menu` | Simpan menu baru + upload gambar | **CREATE** |
| [edit($id)](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php#47-52) | `/admin/menu/{id}/edit` | Form edit menu | - |
| [update($id)](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/StockController.php#16-28) | `PUT /admin/menu/{id}` | Update menu + gambar | **UPDATE** |
| [destroy($id)](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php#86-99) | `DELETE /admin/menu/{id}` | Hapus menu + file gambar | **DELETE** |

**Validasi Store/Update:**
- `nama_menu`: required, string, max 255
- `harga`: required, numeric
- `deskripsi`: nullable, string  
- `gambar`: required (store), nullable (update), image, mimes: jpeg/png/jpg/gif/webp, max 5MB

**File Terkait:**
- Controller: [MenuController.php](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php)
- Views: 
  - [menu.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/public/menu.blade.php) (public)
  - [create.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/admin/menu/create.blade.php)
  - [edit.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/admin/menu/edit.blade.php)
- Model: [Menu.php](file:///C:/Users/USER/Documents/laravelproject/app/Models/Menu.php)

---

### 4Ô∏è‚É£ Manajemen Stok ([StockController](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/StockController.php#8-42))

| Method | Route | Fungsi | CRUD |
|--------|-------|--------|------|
| [index()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/DashboardController.php#12-70) | `/admin/stok` | Daftar stok menu | **READ** |
| [update()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/StockController.php#16-28) | `POST /admin/stok` | Update jumlah stok | **UPDATE** |
| [destroy($id)](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php#86-99) | `DELETE /admin/stok/{id}` | Hapus menu | **DELETE** |

**File Terkait:**
- Controller: [StockController.php](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/StockController.php)
- View: [stok.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/admin/stok.blade.php)

---

### 5Ô∏è‚É£ Manajemen Pesanan ([OrderController](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/OrderController.php#9-133))

| Method | Route | Fungsi | CRUD |
|--------|-------|--------|------|
| [index()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/DashboardController.php#12-70) | `/admin/pesanan` | Daftar semua pesanan | **READ** |
| [store()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/OrderController.php#71-111) | `POST /simpan-pesanan` | Simpan pesanan baru (public) | **CREATE** |
| [updateStatus()](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/OrderController.php#20-70) | `POST /admin/pesanan/status` | Update status pesanan | **UPDATE** |
| [destroy($id)](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/MenuController.php#86-99) | `DELETE /admin/pesanan/{id}` | Hapus pesanan | **DELETE** |

**Status Pesanan:** `Baru` ‚Üí `Selesai` / `Batal`

**Logika Update Status:**
- **Selesai ‚Üí Batal/Baru**: Kurangi `terjual`, Tambah `stok`
- **Baru/Batal ‚Üí Selesai**: Tambah `terjual`
- **Baru/Selesai ‚Üí Batal**: Tambah `stok` (restock)
- **Batal ‚Üí Baru/Selesai**: Kurangi `stok`

**File Terkait:**
- Controller: [OrderController.php](file:///C:/Users/USER/Documents/laravelproject/app/Http/Controllers/OrderController.php)
- View: [pesanan.blade.php](file:///C:/Users/USER/Documents/laravelproject/resources/views/admin/pesanan.blade.php)
- Model: [Pesanan.php](file:///C:/Users/USER/Documents/laravelproject/app/Models/Pesanan.php)

---

## üìÇ Struktur File

```
laravelproject/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthController.php      # Login/Logout
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardController.php # Dashboard admin
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomeController.php      # Halaman public
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MenuController.php      # CRUD Menu
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrderController.php     # CRUD Pesanan
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StockController.php     # Kelola stok
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Middleware/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ AdminMiddleware.php     # Proteksi route admin
‚îÇ   ‚îî‚îÄ‚îÄ Models/
‚îÇ       ‚îú‚îÄ‚îÄ Admin.php                   # Model admin
‚îÇ       ‚îú‚îÄ‚îÄ Menu.php                    # Model menu
‚îÇ       ‚îî‚îÄ‚îÄ Pesanan.php                 # Model pesanan
‚îú‚îÄ‚îÄ resources/views/
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.blade.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.blade.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pesanan.blade.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stok.blade.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ menu/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ create.blade.php
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ edit.blade.php
‚îÇ   ‚îî‚îÄ‚îÄ public/
‚îÇ       ‚îú‚îÄ‚îÄ home.blade.php
‚îÇ       ‚îú‚îÄ‚îÄ menu.blade.php
‚îÇ       ‚îî‚îÄ‚îÄ contact.blade.php
‚îî‚îÄ‚îÄ routes/
    ‚îî‚îÄ‚îÄ web.php                         # Definisi semua route
```

---

## üîÑ Flow Diagram Lengkap

```mermaid
flowchart TB
    subgraph PUBLIC["üåê Public Access"]
        H[Home Page]
        M[Menu Page]
        C[Contact Page]
        SP[Simpan Pesanan]
    end
    
    subgraph AUTH["üîê Authentication"]
        L[Login Page]
        LO[Logout]
    end
    
    subgraph ADMIN["üë§ Admin Dashboard"]
        D[Dashboard]
        
        subgraph MENU_MGMT["üìã Menu Management"]
            TM[Tambah Menu]
            EM[Edit Menu]
            HM[Hapus Menu]
        end
        
        subgraph STOK_MGMT["üì¶ Stok Management"]
            KS[Kelola Stok]
            HS[Hapus dari Stok]
        end
        
        subgraph ORDER_MGMT["üõí Order Management"]
            LP[Lihat Pesanan]
            US[Update Status]
            HP[Hapus Pesanan]
        end
    end
    
    H --> M
    M --> SP
    L -->|Success| D
    L -->|Fail| L
    D --> MENU_MGMT
    D --> STOK_MGMT
    D --> ORDER_MGMT
    LO --> H
```

---

## ‚ö†Ô∏è Catatan Keamanan

> [!WARNING]
> Password admin disimpan dalam **plain text** tanpa hashing. Disarankan menggunakan `bcrypt` atau `Hash::make()` untuk keamanan yang lebih baik.

---

## üìä Ringkasan CRUD per Modul

| Modul | Create | Read | Update | Delete |
|-------|:------:|:----:|:------:|:------:|
| **Menu** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Stok** | - | ‚úÖ | ‚úÖ | ‚úÖ |
| **Pesanan** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Admin** | - | - | - | - |
